# AlfredTelegram

This project allows the users of the Alfred application on Mac to be able to send Telegram messages to contacts/chats.

The installation is not made easy as some steps need to be done manually. However, they are described in this document. If you got a problem, feel free to let me know by any way possible.

# Setup
First, the script needs to use python 3. This is a requirement of the Telegram library (telethon). If you do not want to mess up your Python installation, you can use virtualenv which creates a separate environment. You can easily install the requirements of this project without modifying your current python setup.

If you do not already have the virtualenv installed, I'll let you google on how to install it.

The goal is to create that environment with virtualenv. For example, you can create it in your home with the following command:

```
virtualenv -p python3 ~/tbc
```

With "tbc" being the name of the virtual environment.

You can then go to the Alfred settings app and open the Workflow section. You can then create a new "Blank workflow". On the newly created workflow, you can right-click on it and click on "Show in finder". The folder that is opened contains a file called info.plist. You can remove it and drag the content of this project instead.

You then have to check the Alfred app in the Workflow section. You should have the workflow displayed. 
You'll have to modify the two scripts to have the python interpreter directed to your virtualenv newly created. (In this example, the virtualenv is created in ~/tbc. You can then change the interpreter path to ~/tbc/bin/python

You have to do it for the two scripts in Alfred.

At this step, the Workflow is created, but not yet usable. You have to activate the virtualenv with the following command:

```
source ~/tbc/bin/activate
```

You then need to head to the folder where the Alfred workflow is stored and go in the TelegramBasicCli folder. You'll find a "requirements.txt" file. You can then use the following command:

```
pip install -r requirements.txt
```

Once that is done, you only need to setup your Telegram API ID. You can open the file "settings.py". Inside, you'll find several informations that are generated by Telegram. You can generate yours here: https://my.telegram.org and click on API development tools. Once the app created, you can fill the infos in the "settings.py" file.

Last step is to authenticate your account.

Still with the virtual environment activated, you can launch the main.py script as:

```
python main.py login
```

Some questions will be asked as your phone number and verification code (that you'll receive on your telegram application). Once that is done, you should be able to use the Workflow.

# Usage

```
tg contact_name Message to send
```

